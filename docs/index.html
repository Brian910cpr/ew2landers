<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>910CPR – Courses & Schedule</title>

<!-- GA4 -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-45PBWBK7KR"></script>
<script>
  window.dataLayer=window.dataLayer||[];
  function gtag(){dataLayer.push(arguments)}
  gtag('js',new Date());
  gtag('config','G-45PBWBK7KR');
</script>

<!-- GTM -->
<script>
(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});
var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';
j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-K58Z4XD');
</script>
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-K58Z4XD" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

<style>
:root{
  --ink:#e9f1ff; --bg:#0d1521; --card:#141e2e; --edge:#29384f; --hover:#1b2940;
  --accent:#99c7ff; --muted:#c3d0df; --shadow:0 8px 22px rgba(0,0,0,.5);
  --bannerTop:#0f1b2b; --bannerBot:#0b1421; --bannerText:#eaf2ff;
}
@media (prefers-color-scheme: light){
  :root{
    --ink:#0a1b2b; --bg:#f6f9fc; --card:#ffffff; --edge:#dce9f7; --hover:#f3f8ff;
    --accent:#0b66c3; --muted:#466; --shadow:0 6px 18px rgba(0,0,0,.08);
    --bannerTop:#32415f; --bannerBot:#27354e; --bannerText:#0a1b2b;
  }
}
html,body{background:var(--bg);color:var(--ink);margin:0;font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif}
.wrap{max-width:1120px;margin:auto;padding:18px}
h1{margin:8px 0 12px}
a, a:visited, a:hover, a:focus, a:active { text-decoration: none; color: inherit; }

/* status */
#status{margin:8px 0 12px;padding:8px 12px;border-radius:10px;border:1px solid var(--edge);background:var(--card);display:none;color:var(--ink)}
#status.err{display:block;color:#ffd2d2;border-color:#723b44;background:#2a0f17}

/* Popular */
#popular{background:var(--card);border:1px solid var(--edge);border-radius:16px;box-shadow:var(--shadow);padding:14px 16px}
#popular h2{margin:0 0 10px}
#popular .title{font-weight:800}
#popular .sub{opacity:.95}
@media (max-width:900px){
  #popular > div{display:block !important}
  #popular table{width:100%}
}

/* Sections */
details.section{
  margin:14px 0;border-radius:16px;background:var(--card);border:1px solid var(--edge);box-shadow:var(--shadow);overflow:hidden
}
details.section>summary{list-style:none;cursor:pointer;padding:0}
details.section>summary::-webkit-details-marker{display:none}
.ph-head{
  display:block;padding:16px 18px;border-bottom:1px solid var(--edge);
  background:linear-gradient(180deg,var(--bannerTop),var(--bannerBot));color:var(--bannerText)
}
.ph-head .ph-title{font-weight:900;font-size:1.15rem}
.ph-head .ph-sub{font-size:12px;opacity:.95;margin-top:6px}
.section-body{padding:16px}

/* Grid */
.courses-grid{display:grid;grid-template-columns:1fr 1fr;gap:14px}
@media (max-width:820px){.courses-grid{grid-template-columns:1fr}}
.rowbreak{grid-column:1 / -1;height:0}
.course.spacer{min-height:60px;border:1px solid var(--edge);border-radius:14px;background:var(--card);opacity:0;pointer-events:none}

/* Course card */
details.course{border:1px solid var(--edge);border-radius:14px;background:var(--card);overflow:hidden}
details.course>summary{
  list-style:none;cursor:pointer;padding:12px 16px;
  background:linear-gradient(180deg,#182743,#0f1a2d);border-bottom:1px solid var(--edge);
  font-weight:800;color:#e9f1ff
}
@media (prefers-color-scheme: light){
  details.course>summary{background:linear-gradient(180deg,#ffffff,#f7fbff);color:#0a1b2b}
}
details.course[open]>summary{background:var(--hover)}
.course .body{padding:14px 16px;color:var(--ink)}
.course .desc{margin:6px 0 10px}
.meta{font-size:12px;color:var(--muted);margin-top:10px}
.btn{display:inline-block;margin-top:10px;border:1px solid var(--edge);border-radius:10px;padding:8px 12px;color:var(--accent);background:var(--card)}

/* Session list */
.enrclass-list{list-style:none;padding:0;margin:10px 0;columns:2;column-gap:12px}
@media (max-width:700px){.enrclass-list{columns:1}}
.enrclass-list li{break-inside:avoid;margin:6px 0}
.enrclass-list a{display:flex;flex-direction:column;gap:4px;border:1px solid var(--edge);border-radius:10px;padding:8px 10px;color:var(--ink);background:var(--card)}
.enrclass-list a:hover{background:var(--hover);border-color:#b9d6f9}

#catalog{margin-top:18px}
</style>
</head>

<body>
<div class="wrap">

  <h1>910CPR Courses & Schedule</h1>
  <div id="status"></div>

  <!-- Popular -->
  <section id="popular" itemscope itemtype="https://schema.org/ItemList" style="max-width:1120px;margin:12px auto 22px;">
    <meta itemprop="name" content="Most Popular CPR & Healthcare Provider Classes in Wilmington and Burgaw, NC">
    <div style="display:grid;grid-template-columns:1.25fr .75fr;gap:18px;align-items:center;">
      <div>
        <h2 style="margin:0 0 10px;font-size:20px;line-height:1.2;">Most popular classes</h2>
        <table role="presentation" style="width:100%;border-collapse:separate;border-spacing:12px 12px;">
          <tr>
            <td style="width:25%;"><a class="popbtn popular-link" data-hint="AHA – BLS Provider - In-person Initial" href="https://coastalcprtraining.enrollware.com/schedule" style="display:block;color:#fff;border-radius:12px;padding:12px 14px;background:linear-gradient(180deg,#3e8bf0,#0b66c3);box-shadow:0 8px 22px rgba(0,0,0,.18);"><span class="title" style="display:block;font-weight:800;font-size:14px;margin-bottom:6px;">BLS</span><em class="sub" style="display:block;font-size:12.5px;opacity:.95;">Initial or renewal; instructor-led</em></a></td>
            <td style="width:25%;"><a class="popbtn popular-link" data-hint="AHA – BLS Provider - Online Class" href="https://coastalcprtraining.enrollware.com/schedule" style="display:block;color:#fff;border-radius:12px;padding:12px 14px;background:linear-gradient(180deg,#4a9af5,#2a7be6);box-shadow:0 8px 22px rgba(0,0,0,.18);"><span class="title" style="display:block;font-weight:800;font-size:14px;margin-bottom:6px;">BLS Online</span><em class="sub" style="display:block;font-size:12.5px;opacity:.95;">Blended: online + in-person skills</em></a></td>
            <td style="width:25%;"><a class="popbtn popular-link" data-hint="AHA – ACLS Provider - In-person Renewal" href="https://coastalcprtraining.enrollware.com/schedule" style="display:block;color:#fff;border-radius:12px;padding:12px 14px;background:linear-gradient(180deg,#ff6b76,#b31d2c);box-shadow:0 8px 22px rgba(0,0,0,.18);"><span class="title" style="display:block;font-weight:800;font-size:14px;margin-bottom:6px;">ACLS</span><em class="sub" style="display:block;font-size:12.5px;opacity:.95;">Fully in-person renewal</em></a></td>
            <td style="width:25%;"><a class="popbtn popular-link" data-hint="AHA – ACLS Provider (HeartCode + Skills)" href="https://coastalcprtraining.enrollware.com/schedule" style="display:block;color:#fff;border-radius:12px;padding:12px 14px;background:linear-gradient(180deg,#ff8a93,#e14c59);box-shadow:0 8px 22px rgba(0,0,0,.18);"><span class="title" style="display:block;font-weight:800;font-size:14px;margin-bottom:6px;">ACLS Online</span><em class="sub" style="display:block;font-size:12.5px;opacity:.95;">Initial (online + skills)</em></a></td>
          </tr>
          <tr>
            <td style="width:25%;"><a class="popbtn popular-link" data-hint="AHA – PALS Provider - In-person Renewal" href="https://coastalcprtraining.enrollware.com/schedule" style="display:block;color:#fff;border-radius:12px;padding:12px 14px;background:linear-gradient(180deg,#9c8cff,#5b4abf);box-shadow:0 8px 22px rgba(0,0,0,.18);"><span class="title" style="display:block;font-weight:800;font-size:14px;margin-bottom:6px;">PALS</span><em class="sub" style="display:block;font-size:12.5px;opacity:.95;">Fully in-person renewal</em></a></td>
            <td style="width:25%;"><a class="popbtn popular-link" data-hint="AHA – PALS Provider (HeartCode + Skills)" href="https://coastalcprtraining.enrollware.com/schedule" style="display:block;color:#fff;border-radius:12px;padding:12px 14px;background:linear-gradient(180deg,#b6aaff,#7a66ff);box-shadow:0 8px 22px rgba(0,0,0,.18);"><span class="title" style="display:block;font-weight:800;font-size:14px;margin-bottom:6px;">PALS Online</span><em class="sub" style="display:block;font-size:12.5px;opacity:.95;">Initial (online + skills)</em></a></td>
            <td style="width:25%;"><a class="popbtn popular-link" data-hint="HSI First Aid/CPR/AED (In-Person)" href="https://coastalcprtraining.enrollware.com/schedule" style="display:block;color:#fff;border-radius:12px;padding:12px 14px;background:linear-gradient(180deg,#7a8a98,#485563);box-shadow:0 8px 22px rgba(0,0,0,.18);"><span class="title" style="display:block;font-weight:800;font-size:14px;margin-bottom:6px;">First Aid / CPR / AED</span><em class="sub" style="display:block;font-size:12.5px;opacity:.95;">Fully in-person course</em></a></td>
            <td style="width:25%;"><a class="popbtn popular-link" data-hint="AHA – Heartsaver Online" href="https://coastalcprtraining.enrollware.com/schedule" style="display:block;color:#fff;border-radius:12px;padding:12px 14px;background:linear-gradient(180deg,#96a6b4,#7b8896);box-shadow:0 8px 22px rgba(0,0,0,.18);"><span class="title" style="display:block;font-weight:800;font-size:14px;margin-bottom:6px;">First Aid / CPR / AED Online</span><em class="sub" style="display:block;font-size:12.5px;opacity:.95;">Flexible + fast (online + skills)</em></a></td>
          </tr>
        </table>
      </div>

      <div style="text-align:center;">
        <img src="https://www.enrollware.com/sitefiles/coastalcprtraining/910CPR_wave.jpg" alt="910CPR wave brand banner" loading="lazy" style="max-width:100%;height:auto;border-radius:12px;border:1px solid rgba(0,0,0,.08);box-shadow:0 8px 22px rgba(0,0,0,.12)">
      </div>
    </div>
  </section>

  <div id="catalog"></div>

</div>

<script>
(function(){
  const ENR_ORIGIN='https://coastalcprtraining.enrollware.com';
  const SNAPSHOT_URL='/docs/data/enrollware-schedule.html';
  const statusEl=document.getElementById('status');

  function setStatus(msg,isErr){
    if(!statusEl) return;
    statusEl.textContent=msg||'';
    statusEl.className=isErr?'err':'';
    statusEl.style.display = msg ? 'block' : 'none';
  }

  const isCt=id=>typeof id==='string' && /^ct\d{3,}$/i.test(id);
  const ctHref=id=>`${ENR_ORIGIN}/schedule#${encodeURIComponent(id)}`;

  function absolutize(el) {
    if (!el) return el;
    el.querySelectorAll('a,img').forEach(node=>{
      const attr=node.tagName==='IMG'?'src':'href';
      const v=node.getAttribute(attr);
      if(!v) return;
      if(/^https?:\/\//i.test(v)) return;
      const abs=v.startsWith('/')?ENR_ORIGIN+v:ENR_ORIGIN+'/'+v.replace(/^\.\//,'');
      node.setAttribute(attr,abs);
    });
    return el;
  }

  // Find first #ct#### in a UL (most reliable)
  function ctFromUl(ul){
    if(!ul) return '';
    const a=ul.querySelector('a[href*="#ct"]');
    if(!a) return '';
    const m=(a.getAttribute('href')||'').match(/#(ct\d+)/i);
    return m?m[1]:'';
  }

  // Robust CT detection around a panel
  function getCtId(panel,root,ul){
    const fromUl=ctFromUl(ul); if(isCt(fromUl)) return fromUl;
    const anchor=panel.querySelector('[id^="ct"],[name^="ct"]');
    if(anchor){
      const v=anchor.id||anchor.getAttribute('name');
      if(isCt(v)) return v;
    }
    const link=panel.querySelector('a[href*="#ct"]');
    if(link){
      const m=(link.getAttribute('href')||'').match(/#(ct\d+)/i);
      if(m) return m[1];
    }
    let prev=panel.previousElementSibling;
    for(let i=0;i<8 && prev;i++){
      if(prev.matches && prev.matches('[id^="ct"],[name^="ct"]')){
        const v=prev.id||prev.getAttribute('name');
        if(isCt(v)) return v;
      }
      const inner=prev.querySelector ? prev.querySelector('[id^="ct"],[name^="ct"]') : null;
      if(inner){
        const v=inner.id||inner.getAttribute('name');
        if(isCt(v)) return v;
      }
      prev=prev.previousElementSibling;
    }
    if(window.NodeFilter){
      const walker=document.createTreeWalker(root,NodeFilter.SHOW_ELEMENT);
      let last=''; while(walker.nextNode()){
        const el=walker.currentNode; if(el===panel) break;
        const id=el.id||el.getAttribute?.('name'); if(id && isCt(id)) last=id;
      }
      if(isCt(last)) return last;
    }
    return '';
  }

  function parseDateFromText(t){
    if(!t) return null; const s=t.trim();
    const m=s.match(/([A-Za-z]+)\s+(\d{1,2}),\s*(\d{4})\s+at\s+(\d{1,2}):(\d{2})\s*(AM|PM)/i);
    if(!m) return null;
    const months={january:0,february:1,march:2,april:3,may:4,june:5,july:6,august:7,september:8,october:9,november:10,december:11};
    let h=+m[4]; const ampm=m[6].toUpperCase();
    if(ampm==='PM'&&h<12)h+=12; if(ampm==='AM'&&h===12)h=0;
    return new Date(+m[3],months[m[1].toLowerCase()],+m[2],h,+m[5]);
  }

  // Keep up to next 28 days, max 15 items
  function limitUl(ul,maxDays=28,maxItems=15){
    if(!ul) return {ul,kept:0,total:0};
    const cutoff=new Date(); cutoff.setDate(cutoff.getDate()+maxDays);
    const lis=[...ul.querySelectorAll(':scope>li')];
    let kept=0,total=0;
    for(const li of lis){ total++;
      const a=li.querySelector('a');
      const txt=(a?.textContent||li.textContent||'').trim();
      const dt=parseDateFromText(txt);
      if(!dt || (dt<=cutoff && kept<maxItems)){ kept++; } else { li.remove(); }
      // make session links absolute enroll URLs
      if(a){
        const href=a.getAttribute('href')||'';
        // if a relative enroll link, absolutize to ENR_ORIGIN
        if(/^\/?enroll\?id=/i.test(href) || href.includes('/enroll?id=')){
          if(!/^https?:\/\//i.test(href)){
            a.setAttribute('href', ENR_ORIGIN + (href.startsWith('/')?href:'/'+href));
          }
        }else{
          // if it was a schedule#ct link, keep it absolute too
          if(!/^https?:\/\//i.test(href)){
            a.setAttribute('href', ENR_ORIGIN + (href.startsWith('/')?href:'/'+href));
          }
        }
      }
    }
    return {ul,kept,total};
  }

  function buildCourseCard(c){
    const course=document.createElement('details'); course.className='course';
    course.innerHTML=
      '<summary class="course-head"><span class="hlink" aria-hidden="true">'
      + (c.titleHTML||'').trim()
      + '</span></summary>'
      + '<div class="body">'
      +   '<div class="desc">'+(c.descHTML||'')+'</div>'
      +   '<ul class="enrclass-list"></ul>'
      +   '<div class="meta">'
      +     (c.total>c.kept ? ('Showing '+c.kept+' of '+c.total+' upcoming (~4 weeks). ') : 'All upcoming sessions shown. ')
      +     '<a class="btn see-all" href="'+(isCt(c.id)?ctHref(c.id):(ENR_ORIGIN+'/schedule'))+'">See all dates</a>'
      +   '</div>'
      + '</div>';
    if(c.ul){ course.querySelector('.enrclass-list').replaceWith(c.ul); }
    return course;
  }

  // Title/placeholder cards: explicit names OR no sessions found
  const explicitTitles = [
    'Healthcare Provider: BLS Course',
    'Healthcare Provider: ACLS Course',
    'Healthcare Provider: PALS Course',
    'Healthcare Provider: ASLS Course',
    'CPR / AED & First Aid',
    'Other Programs'
  ].map(s=>s.toLowerCase());
  function isTitleCard(c){
    const t=(c.titleText||'').trim().toLowerCase();
    return (!c.ulHasItems) || explicitTitles.includes(t);
  }

  async function loadSnapshotHTML(){
    try{
      const r=await fetch(SNAPSHOT_URL,{cache:'no-cache'});
      if(r.ok) return await r.text();
    }catch(e){}
    return null;
  }

  async function renderCatalog(){
    const host=document.getElementById('catalog');
    const html=await loadSnapshotHTML();
    if(!html){ setStatus('Could not load schedule snapshot at '+SNAPSHOT_URL, true); return; }

    try{
      const root=document.createElement('div'); root.innerHTML=html;

      // Collect panels exactly as in Enrollware snapshot
      const panels=[...root.querySelectorAll('.enrpanel')];

      // Create one section shell to hold grid (we can keep multiple sections if you prefer)
      host.innerHTML =
        '<details class="section" open><summary><div class="ph-head"><div class="ph-title">Courses</div></div></summary><div class="section-body"><div class="courses-grid"></div></div></details>';
      const grid=host.querySelector('.courses-grid');

      panels.forEach(p=>{
        // Header/title
        const headingEl=p.querySelector('.enrpanel-heading,h1,h2,h3,h4'); if(!headingEl) return;
        const headingFrag=headingEl.cloneNode(true); absolutize(headingFrag);
        const titleHTML=headingFrag.innerHTML.trim();
        const titleText=headingFrag.textContent||'';

        // Body/desc (without session UL)
        const bodyEl=p.querySelector('.enrpanel-body');
        const descClone=bodyEl?bodyEl.cloneNode(true):null;
        if(descClone){
          const u=descClone.querySelector('ul.enrclass-list'); if(u) u.remove();
          absolutize(descClone);
        }
        const descHTML=descClone?(descClone.innerHTML||'').trim():'';

        // Sessions UL (clone + absolutize + limit)
        const ul=p.querySelector('ul.enrclass-list');
        let ulClone=null, kept=0, total=0, ulHasItems=false;
        if(ul){
          ulClone=ul.cloneNode(true);
          absolutize(ulClone);
          const limited=limitUl(ulClone,28,15);
          ulClone=limited.ul; kept=limited.kept; total=limited.total;
          ulHasItems = kept>0 || (ulClone && ulClone.querySelector('li'));
        }

        // Course/periscope id
        const ctId=getCtId(p,root,ulClone);

        const courseObj={ id:ctId, titleHTML, titleText, descHTML, ul:ulClone, kept, total, ulHasItems };

        if(isTitleCard(courseObj)){
          // Force new row, then title card + blank spacer
          grid.insertAdjacentHTML('beforeend','<div class="rowbreak" aria-hidden="true"></div>');
          grid.appendChild(buildCourseCard(courseObj));
          grid.insertAdjacentHTML('beforeend','<div class="course spacer" aria-hidden="true"></div>');
        }else{
          grid.appendChild(buildCourseCard(courseObj));
        }
      });

      // Done
      setStatus('');
    }catch(err){
      setStatus('Render error: '+(err?.message||String(err)), true);
    }
  }

  // Hook up “Most popular” buttons to exact CTs once cards are rendered
  function resolvePopularToCt(){
    try{
      const idx=[];
      document.querySelectorAll('#catalog details.course .course-head .hlink').forEach(h=>{
        const title=(h.textContent||'').trim();
        const card=h.closest('details.course'); if(!card) return;
        const a=card.querySelector('.meta a.see-all'); if(!a) return;
        const href=a.getAttribute('href')||'';
        const m=href.match(/#(ct\d+)/i);
        const ct=m?m[1]:null;
        if(title && ct) idx.push({title,ct});
      });
      document.querySelectorAll('#popular .popular-link').forEach(a=>{
        const hint=(a.getAttribute('data-hint')||'').toLowerCase();
        const found=idx.find(x=>x.title.toLowerCase().includes(hint));
        if(found){ a.setAttribute('href', ENR_ORIGIN+'/schedule#'+encodeURIComponent(found.ct)); a.setAttribute('title', found.title+' – full schedule'); }
      });
    }catch(e){}
  }

  document.addEventListener('DOMContentLoaded', async ()=>{
    await renderCatalog();
    resolvePopularToCt();
  });
})();
</script>


<!-- Voice widget -->
<embeddable-voice id="1cf9bf8f-38da-437e-abfb-efa1ce9a02ff"></embeddable-voice>
<script src="https://cdn.247aireceptionist.com/script.js"></script>
</body>
</html>
