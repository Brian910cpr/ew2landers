<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>910CPR – Courses & Schedule</title>

<!-- GA4 -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-45PBWBK7KR"></script>
<script>
  window.dataLayer=window.dataLayer||[];
  function gtag(){dataLayer.push(arguments)}
  gtag('js',new Date());
  gtag('config','G-45PBWBK7KR');
</script>

<!-- GTM -->
<script>
(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});
var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';
j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-K58Z4XD');
</script>
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-K58Z4XD" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

<style>
:root{
  --ink:#0a1b2b; --bg:#f6f9fc; --card:#ffffff; --edge:#dce9f7; --hover:#f3f8ff;
  --accent:#0b66c3; --muted:#466; --shadow:0 6px 18px rgba(0,0,0,.08);
  --bannerTop:#32415f; --bannerBot:#27354e; --bannerText:#f4f7fb;
}
@media (prefers-color-scheme: dark){
  :root{
    --ink:#eaf1ff; --bg:#0d1521; --card:#141e2e; --edge:#29384f; --hover:#1b2940;
    --accent:#7fb4ff; --muted:#9fb3c7; --shadow:0 8px 22px rgba(0,0,0,.5);
    --bannerTop:#0f1b2b; --bannerBot:#0b1421; --bannerText:#cfe2ff;
  }
}
html,body{background:var(--bg);color:var(--ink);margin:0;font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif}
.wrap{max-width:1120px;margin:auto;padding:18px}
h1{margin:8px 0 12px}

/* Remove underlines from all links, all states */
a, a:visited, a:hover, a:focus, a:active { text-decoration: none; }

/* Popular block */
#popular{background:var(--card);border:1px solid var(--edge);border-radius:16px;box-shadow:var(--shadow);padding:14px 16px}
#popular h2{margin:0 0 10px}
#popular .title{font-weight:800}
#popular .sub{opacity:.95}
@media (max-width:900px){
  #popular > div{display:block !important}
  #popular table{width:100%}
}

/* Sections (top-level “placeholder” headers) */
details.section{
  margin:14px 0;border-radius:16px;background:var(--card);border:1px solid var(--edge);box-shadow:var(--shadow);overflow:hidden
}
details.section>summary{list-style:none;cursor:pointer;padding:0}
details.section>summary::-webkit-details-marker{display:none}
.ph-head{
  display:block;padding:16px 18px;border-bottom:1px solid var(--edge);
  background:linear-gradient(180deg,var(--bannerTop),var(--bannerBot));color:var(--bannerText)
}
.ph-head .ph-title{font-weight:900;font-size:1.15rem}
.ph-head .ph-sub{font-size:12px;opacity:.95;margin-top:6px}
.section-body{padding:16px}

/* Courses grid under each placeholder header */
.courses-grid{
  display:grid;grid-template-columns:1fr 1fr;gap:14px
}
@media (max-width:820px){ .courses-grid{grid-template-columns:1fr} }

/* Blank spacer card to occupy the right cell beside header */
.course.spacer{
  min-height:60px;
  border:1px solid var(--edge);
  border-radius:14px;
  background:var(--card);
  opacity:0;
  pointer-events:none;
}

/* Course card (second-level) */
details.course{
  border:1px solid var(--edge);border-radius:14px;background:var(--card);overflow:hidden
}
details.course>summary{
  list-style:none;cursor:pointer;padding:12px 16px;
  background:linear-gradient(180deg,#ffffff,#f7fbff);border-bottom:1px solid var(--edge);font-weight:800
}
@media (prefers-color-scheme: dark){
  details.course>summary{background:linear-gradient(180deg,#172339,#0f1a2d)}
}
details.course[open]>summary{background:var(--hover)}
.course .body{padding:14px 16px}
.course .desc{margin:6px 0 10px}
.meta{font-size:12px;color:var(--muted);margin-top:10px}
.btn{
  display:inline-block;margin-top:10px;border:1px solid var(--edge);border-radius:10px;
  padding:8px 12px;text-decoration:none;color:var(--accent);background:var(--card)
}

/* Sessions list (dates) – two columns on wide screens */
.enrclass-list{list-style:none;padding:0;margin:10px 0;columns:2;column-gap:12px}
@media (max-width:700px){ .enrclass-list{columns:1} }
.enrclass-list li{break-inside:avoid;margin:6px 0}
.enrclass-list a{
  display:flex;flex-direction:column;gap:4px;border:1px solid var(--edge);
  border-radius:10px;padding:8px 10px;color:var(--ink);background:var(--card)
}
.enrclass-list a:hover{background:var(--hover);border-color:#b9d6f9}

/* Catalog container */
#catalog{margin-top:18px}
</style>
</head>

<body>
<div class="wrap">

  <h1>910CPR Courses & Schedule</h1>

  <!-- Most Popular Classes -->
  <section id="popular" itemscope itemtype="https://schema.org/ItemList" style="max-width:1120px;margin:12px auto 22px;">
    <meta itemprop="name" content="Most Popular CPR & Healthcare Provider Classes in Wilmington and Burgaw, NC">
    <div style="display:grid;grid-template-columns:1.25fr .75fr;gap:18px;align-items:center;">
      <!-- Left: Buttons -->
      <div>
        <h2 style="margin:0 0 10px;font-size:20px;line-height:1.2;">Most popular classes</h2>

        <table role="presentation" style="width:100%;border-collapse:separate;border-spacing:12px 12px;">
          <tr>
            <td style="width:25%;">
              <a class="popbtn cat-bls popular-link"
                 data-hint="AHA – BLS Provider - In-person Initial"
                 href="https://coastalcprtraining.enrollware.com/schedule"
                 itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"
                 style="display:block;color:#fff;border-radius:12px;padding:12px 14px;background:linear-gradient(180deg,#3e8bf0,#0b66c3);box-shadow:0 8px 22px rgba(0,0,0,.18);">
                <span class="title" itemprop="name" style="display:block;font-weight:800;font-size:14px;margin-bottom:6px;">BLS</span>
                <em class="sub" style="display:block;font-size:12.5px;opacity:.95;">Initial or renewal; instructor-led</em>
                <meta itemprop="position" content="1">
              </a>
            </td>

            <td style="width:25%;">
              <a class="popbtn cat-bls popular-link"
                 data-hint="AHA – BLS Provider - Online Class"
                 href="https://coastalcprtraining.enrollware.com/schedule"
                 itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"
                 style="display:block;color:#fff;border-radius:12px;padding:12px 14px;background:linear-gradient(180deg,#4a9af5,#2a7be6);box-shadow:0 8px 22px rgba(0,0,0,.18);">
                <span class="title" itemprop="name" style="display:block;font-weight:800;font-size:14px;margin-bottom:6px;">BLS Online</span>
                <em class="sub" style="display:block;font-size:12.5px;opacity:.95;">Blended: online + in-person skills</em>
                <meta itemprop="position" content="2">
              </a>
            </td>

            <td style="width:25%;">
              <a class="popbtn cat-acls popular-link"
                 data-hint="AHA – ACLS Provider - In-person Renewal"
                 href="https://coastalcprtraining.enrollware.com/schedule"
                 itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"
                 style="display:block;color:#fff;border-radius:12px;padding:12px 14px;background:linear-gradient(180deg,#ff6b76,#b31d2c);box-shadow:0 8px 22px rgba(0,0,0,.18);">
                <span class="title" itemprop="name" style="display:block;font-weight:800;font-size:14px;margin-bottom:6px;">ACLS</span>
                <em class="sub" style="display:block;font-size:12.5px;opacity:.95;">Fully in-person renewal</em>
                <meta itemprop="position" content="3">
              </a>
            </td>

            <td style="width:25%;">
              <a class="popbtn cat-acls popular-link"
                 data-hint="AHA – ACLS Provider (HeartCode + Skills)"
                 href="https://coastalcprtraining.enrollware.com/schedule"
                 itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"
                 style="display:block;color:#fff;border-radius:12px;padding:12px 14px;background:linear-gradient(180deg,#ff8a93,#e14c59);box-shadow:0 8px 22px rgba(0,0,0,.18);">
                <span class="title" itemprop="name" style="display:block;font-weight:800;font-size:14px;margin-bottom:6px;">ACLS Online</span>
                <em class="sub" style="display:block;font-size:12.5px;opacity:.95;">Initial (online + skills)</em>
                <meta itemprop="position" content="4">
              </a>
            </td>
          </tr>

          <tr>
            <td style="width:25%;">
              <a class="popbtn cat-pals popular-link"
                 data-hint="AHA – PALS Provider - In-person Renewal"
                 href="https://coastalcprtraining.enrollware.com/schedule"
                 itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"
                 style="display:block;color:#fff;border-radius:12px;padding:12px 14px;background:linear-gradient(180deg,#9c8cff,#5b4abf);box-shadow:0 8px 22px rgba(0,0,0,.18);">
                <span class="title" itemprop="name" style="display:block;font-weight:800;font-size:14px;margin-bottom:6px;">PALS</span>
                <em class="sub" style="display:block;font-size:12.5px;opacity:.95;">Fully in-person renewal</em>
                <meta itemprop="position" content="5">
              </a>
            </td>

            <td style="width:25%;">
              <a class="popbtn cat-pals popular-link"
                 data-hint="AHA – PALS Provider (HeartCode + Skills)"
                 href="https://coastalcprtraining.enrollware.com/schedule"
                 itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"
                 style="display:block;color:#fff;border-radius:12px;padding:12px 14px;background:linear-gradient(180deg,#b6aaff,#7a66ff);box-shadow:0 8px 22px rgba(0,0,0,.18);">
                <span class="title" itemprop="name" style="display:block;font-weight:800;font-size:14px;margin-bottom:6px;">PALS Online</span>
                <em class="sub" style="display:block;font-size:12.5px;opacity:.95;">Initial (online + skills)</em>
                <meta itemprop="position" content="6">
              </a>
            </td>

            <td style="width:25%;">
              <a class="popbtn cat-fa popular-link"
                 data-hint="HSI First Aid/CPR/AED (In-Person)"
                 href="https://coastalcprtraining.enrollware.com/schedule"
                 itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"
                 style="display:block;color:#fff;border-radius:12px;padding:12px 14px;background:linear-gradient(180deg,#7a8a98,#485563);box-shadow:0 8px 22px rgba(0,0,0,.18);">
                <span class="title" itemprop="name" style="display:block;font-weight:800;font-size:14px;margin-bottom:6px;">First Aid / CPR / AED</span>
                <em class="sub" style="display:block;font-size:12.5px;opacity:.95;">Fully in-person course</em>
                <meta itemprop="position" content="7">
              </a>
            </td>

            <td style="width:25%;">
              <a class="popbtn cat-fa popular-link"
                 data-hint="AHA – Heartsaver Online"
                 href="https://coastalcprtraining.enrollware.com/schedule"
                 itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"
                 style="display:block;color:#fff;border-radius:12px;padding:12px 14px;background:linear-gradient(180deg,#96a6b4,#7b8896);box-shadow:0 8px 22px rgba(0,0,0,.18);">
                <span class="title" itemprop="name" style="display:block;font-weight:800;font-size:14px;margin-bottom:6px;">First Aid / CPR / AED Online</span>
                <em class="sub" style="display:block;font-size:12.5px;opacity:.95;">Flexible + fast (online + skills)</em>
                <meta itemprop="position" content="8">
              </a>
            </td>
          </tr>
        </table>
      </div>

      <!-- Right: Brand banner (JPG) -->
      <div style="text-align:center;">
        <img
          src="https://www.enrollware.com/sitefiles/coastalcprtraining/910CPR_wave.jpg"
          alt="910CPR wave brand banner"
          loading="lazy"
          style="max-width:100%;height:auto;border-radius:12px;border:1px solid rgba(0,0,0,.08);box-shadow:0 8px 22px rgba(0,0,0,.12)"
        >
      </div>
    </div>
  </section>

  <!-- Catalog rendered from Enrollware snapshot -->
  <div id="catalog"></div>

</div><!-- /.wrap -->

<script>
const ENR_ORIGIN='https://coastalcprtraining.enrollware.com';
const isCt=id=>typeof id==='string' && /^ct\d{3,}$/i.test(id);
const ctHref=id=>`${ENR_ORIGIN}/schedule#${encodeURIComponent(id)}`;

/* Absolutize IMG/A URLs coming from the Enrollware fragment */
function absolutizeUrls(frag){
  frag.querySelectorAll('img,a').forEach(el=>{
    const attr=el.tagName==='IMG'?'src':'href';
    const v=el.getAttribute(attr); if(!v) return;
    if(/^https?:\/\//i.test(v)) return;
    const abs=v.startsWith('/')?ENR_ORIGIN+v:ENR_ORIGIN+'/'+v.replace(/^\.\//,'');
    el.setAttribute(attr,abs);
  });
  return frag;
}

/* Locate ct ID: anchor nearby, or link referencing #ct, or nearest previous ct anchor in DOM */
function getCtId(panel,root){
  const anchor=panel.querySelector('[id^="ct"],[name^="ct"]');
  if(anchor){const v=anchor.id||anchor.getAttribute('name'); if(isCt(v)) return v;}
  const link=panel.querySelector('a[href*="#ct"]');
  if(link){const m=link.getAttribute('href').match(/#(ct\d+)/i); if(m) return m[1];}
  let prev=panel.previousElementSibling;
  for(let i=0;i<8 && prev;i++){
    if(prev.matches?.('[id^="ct"],[name^="ct"]')){const v=prev.id||prev.getAttribute('name'); if(isCt(v)) return v;}
    const inner=prev.querySelector?.('[id^="ct"],[name^="ct"]'); if(inner){const v=inner.id||inner.getAttribute('name'); if(isCt(v)) return v;}
    prev=prev.previousElementSibling;
  }
  const walker=document.createTreeWalker(root,NodeFilter.SHOW_ELEMENT);
  let last=''; while(walker.nextNode()){
    const el=walker.currentNode; if(el===panel) break;
    const id=el.id||el.getAttribute?.('name'); if(id && isCt(id)) last=id;
  }
  return last;
}

/* Parse "Thursday, October 30, 2025 at 12:30 PM" */
function parseDateFromText(t){
  if(!t) return null; const s=t.trim();
  const m=s.match(/([A-Za-z]+)\s+(\d{1,2}),\s*(\d{4})\s+at\s+(\d{1,2}):(\d{2})\s*(AM|PM)/i);
  if(!m) return null;
  const months={january:0,february:1,march:2,april:3,may:4,june:5,july:6,august:7,september:8,october:9,november:10,december:11};
  let h=+m[4]; if(m[6].toUpperCase()==='PM'&&h<12)h+=12; if(m[6].toUpperCase()==='AM'&&h===12)h=0;
  return new Date(+m[3],months[m[1].toLowerCase()],+m[2],h,+m[5]);
}

/* Keep ~4 weeks or up to 10 items */
function limitUlToWindow(ul,maxDays=28,maxItems=10){
  if(!ul) return {ul,kept:0,total:0};
  const cutoff=new Date(); cutoff.setDate(cutoff.getDate()+maxDays);
  const lis=[...ul.querySelectorAll(':scope>li')]; let kept=0,total=0;
  for(const li of lis){ total++;
    const a=li.querySelector('a'); const txt=(a?.textContent||li.textContent||'').trim();
    const dt=parseDateFromText(txt);
    if(!dt || (dt<=cutoff && kept<maxItems)){ kept++; } else { li.remove(); }
  }
  return {ul,kept,total};
}

/* Load snapshot from docs/data/enrollware-schedule.html */
async function loadSnapshotHTML(){
  const here=location.pathname,base=here.replace(/[^/]+$/,'');
  const tries=[
    base+'data/enrollware-schedule.html',
    '/ew2landers/data/enrollware-schedule.html',
    './data/enrollware-schedule.html',
    'data/enrollware-schedule.html'
  ];
  for(const u of tries){
    try{ const r=await fetch(u,{cache:'no-cache'}); if(r.ok) return {html:await r.text(),url:u}; }catch{}
  }
  return {html:null,url:null};
}

/* Render catalog: top-level placeholders -> spacer -> grid of course cards */
async function renderCatalog(){
  const host=document.getElementById('catalog');
  const load=await loadSnapshotHTML();
  if(!load.html){ host.innerHTML='<p>Could not load schedule snapshot.</p>'; return; }

  const root=document.createElement('div'); root.innerHTML=load.html;
  const panels=[...root.querySelectorAll('.enrpanel')];

  const sections=[]; let current=null;
  for(const p of panels){
    const headingEl=p.querySelector('.enrpanel-heading,h1,h2,h3,h4'); if(!headingEl) continue;
    const headingFrag=headingEl.cloneNode(true); absolutizeUrls(headingFrag);
    const titleHTML=headingFrag.innerHTML.trim();

    const bodyEl=p.querySelector('.enrpanel-body');
    const descClone=bodyEl?bodyEl.cloneNode(true):null;
    if(descClone){ const u=descClone.querySelector('ul.enrclass-list'); if(u) u.remove(); absolutizeUrls(descClone); }
    const descHTML=descClone?(descClone.innerHTML||'').trim():'';

    const ul=p.querySelector('ul.enrclass-list');
    const hasDates=!!ul;

    /* Placeholder header (no dates) starts a new section */
    if(!hasDates){
      current={header:{titleHTML,descHTML},courses:[]}; sections.push(current);
      continue;
    }

    /* Ensure a section exists */
    if(!current){ current={header:{titleHTML:'Courses',descHTML:''},courses:[]}; sections.push(current); }

    const ulClone=ul.cloneNode(true); absolutizeUrls(ulClone);
    const trimmed=limitUlToWindow(ulClone,28,10);
    const ctId=getCtId(p,root);

    current.courses.push({
      id:ctId,
      titleHTML,
      descHTML,
      ul:trimmed.ul,
      kept:trimmed.kept,
      total:trimmed.total
    });
  }

  /* Build DOM */
  host.innerHTML='';
  sections.forEach((sec,idx)=>{
    const secEl=document.createElement('details'); secEl.className='section';
    if(idx===0) secEl.setAttribute('open',''); /* auto-open first top-level */
    secEl.innerHTML=`
      <summary>
        <div class="ph-head">
          <div class="ph-title">${sec.header.titleHTML}</div>
          ${sec.header.descHTML?`<div class="ph-sub">${sec.header.descHTML}</div>`:''}
        </div>
      </summary>
      <div class="section-body">
        <div class="courses-grid"></div>
      </div>`;
    const grid=secEl.querySelector('.courses-grid');

    /* Add blank spacer card so the first real course starts on the next row (creating a blank to the right of the header) */
    grid.insertAdjacentHTML('beforeend','<div class="course spacer" aria-hidden="true"></div>');

    sec.courses.forEach(c=>{
      const course=document.createElement('details'); course.className='course';
      /* Summary is plain title (not a link). Links live in body via “See all dates”. */
      course.innerHTML=`
        <summary class="course-head">
          <span class="hlink" aria-hidden="true">${c.titleHTML}</span>
        </summary>
        <div class="body">
          <div class="desc">${c.descHTML||''}</div>
          <ul class="enrclass-list"></ul>
          <div class="meta">
            ${
              c.total>c.kept
              ? `Showing ${c.kept} of ${c.total} upcoming (~4 weeks). `
              : `All upcoming sessions shown. `
            }
            <a class="btn" href="${isCt(c.id)?ctHref(c.id):ENR_ORIGIN+'/schedule'}">See all dates</a>
          </div>
        </div>`;
      course.querySelector('.enrclass-list').replaceWith(c.ul);
      grid.appendChild(course);
    });

    host.appendChild(secEl);
  });
}

/* Only one top-level open at once, and do NOT auto-scroll (keep quick links visible) */
function wireCurtains(){
  document.querySelectorAll('details.section').forEach(sec=>{
    sec.addEventListener('toggle',()=>{
      if(sec.open){
        document.querySelectorAll('details.section').forEach(d=>{ if(d!==sec) d.open=false; });
      }
    });
  });
}

/* After catalog renders, upgrade Popular links to exact #ct URLs by matching titles we just rendered */
function resolvePopularToCt(){
  const idx=[];
  document.querySelectorAll('#catalog details.course .course-head .hlink').forEach(h=>{
    const title=(h.textContent||'').trim();
    const card=h.closest('details.course'); if(!card) return;
    const a=card.querySelector('.meta a.btn'); if(!a) return;
    const m=(a.getAttribute('href')||'').match(/#(ct\d+)/i);
    const ct=m?m[1]:null;
    if(title && ct) idx.push({title,ct});
  });
  document.querySelectorAll('#popular .popular-link').forEach(a=>{
    const hint=(a.getAttribute('data-hint')||'').toLowerCase();
    const found=idx.find(x=>x.title.toLowerCase().includes(hint));
    if(found){ a.setAttribute('href', ctHref(found.ct)); a.setAttribute('title', found.title+' – full schedule'); }
  });
}

document.addEventListener('DOMContentLoaded', async ()=>{
  await renderCatalog();
  wireCurtains();
  resolvePopularToCt();
});
</script>

<!-- Voice widget -->
<embeddable-voice id="1cf9bf8f-38da-437e-abfb-efa1ce9a02ff"></embeddable-voice>
<script src="https://cdn.247aireceptionist.com/script.js"></script>
</body>
</html>
