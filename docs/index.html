<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>910CPR – Courses & Schedule</title>

<!-- GA4 -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-45PBWBK7KR"></script>
<script>
  window.dataLayer=window.dataLayer||[];
  function gtag(){dataLayer.push(arguments)}
  gtag('js',new Date());
  gtag('config','G-45PBWBK7KR');
</script>

<!-- GTM -->
<script>
(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});
var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';
j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-K58Z4XD');
</script>
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-K58Z4XD" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

<style>
:root{
  /* Dark theme (default) — crank contrast */
  --ink:#e9f1ff;            /* high-contrast text on dark bg */
  --bg:#0d1521;
  --card:#141e2e;
  --edge:#29384f;
  --hover:#1b2940;
  --accent:#99c7ff;        /* slightly brighter accent for contrast */
  --muted:#c3d0df;
  --shadow:0 8px 22px rgba(0,0,0,.5);
  --bannerTop:#0f1b2b;
  --bannerBot:#0b1421;
  --bannerText:#eaf2ff;     /* brighter banner text */
}
@media (prefers-color-scheme: light){
  :root{
    --ink:#0a1b2b;
    --bg:#f6f9fc;
    --card:#ffffff;
    --edge:#dce9f7;
    --hover:#f3f8ff;
    --accent:#0b66c3;
    --muted:#466;
    --shadow:0 6px 18px rgba(0,0,0,.08);
    --bannerTop:#32415f;
    --bannerBot:#27354e;
    --bannerText:#0a1b2b;
  }
}

html,body{background:var(--bg);color:var(--ink);margin:0;font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif}
.wrap{max-width:1120px;margin:auto;padding:18px}
h1{margin:8px 0 12px}
a, a:visited, a:hover, a:focus, a:active { text-decoration: none; color: inherit; }

/* inline status banner */
#status{margin:8px 0 12px;padding:8px 12px;border-radius:10px;border:1px solid var(--edge);background:var(--card);display:none;color:var(--ink)}
#status.err{display:block;color:#ffd2d2;border-color:#723b44;background:#2a0f17}

/* Popular block */
#popular{background:var(--card);border:1px solid var(--edge);border-radius:16px;box-shadow:var(--shadow);padding:14px 16px;color:var(--ink)}
#popular h2{margin:0 0 10px}
#popular .title{font-weight:800}
#popular .sub{opacity:.95}
@media (max-width:900px){
  #popular > div{display:block !important}
  #popular table{width:100%}
}

/* Sections (top “placeholder” headers) */
details.section{
  margin:14px 0;border-radius:16px;background:var(--card);border:1px solid var(--edge);box-shadow:var(--shadow);overflow:hidden;color:var(--ink)
}
details.section>summary{list-style:none;cursor:pointer;padding:0}
details.section>summary::-webkit-details-marker{display:none}
.ph-head{
  display:block;padding:16px 18px;border-bottom:1px solid var(--edge);
  background:linear-gradient(180deg,var(--bannerTop),var(--bannerBot));color:var(--bannerText)
}
.ph-head .ph-title{font-weight:900;font-size:1.15rem}
.ph-head .ph-sub{font-size:12px;opacity:.95;margin-top:6px}
.section-body{padding:16px}

/* Course grid under each header */
.courses-grid{
  display:grid;grid-template-columns:1fr 1fr;gap:14px
}
@media (max-width:820px){ .courses-grid{grid-template-columns:1fr} }

/* row breaker utility */
.rowbreak{grid-column:1 / -1;height:0}

/* Spacer (blank) placed to the RIGHT of every course “title card” */
.course.spacer{
  min-height:60px;border:1px solid var(--edge);border-radius:14px;background:var(--card);
  opacity:0;pointer-events:none
}

/* Course card */
details.course{
  border:1px solid var(--edge);border-radius:14px;background:var(--card);overflow:hidden;color:var(--ink)
}
details.course>summary{
  list-style:none;cursor:pointer;padding:12px 16px;
  background:linear-gradient(180deg,#182743,#0f1a2d);
  border-bottom:1px solid var(--edge);
  font-weight:800;
  color:#e9f1ff; /* force bright summary text on dark */
}
@media (prefers-color-scheme: light){
  details.course>summary{background:linear-gradient(180deg,#ffffff,#f7fbff);color:#0a1b2b}
}
details.course[open]>summary{background:var(--hover)}
.course .body{padding:14px 16px;color:var(--ink)}
.course .desc{margin:6px 0 10px}
.meta{font-size:12px;color:var(--muted);margin-top:10px}
.btn{
  display:inline-block;margin-top:10px;border:1px solid var(--edge);border-radius:10px;
  padding:8px 12px;color:var(--accent);background:var(--card)
}

/* Sessions list – two columns */
.enrclass-list{list-style:none;padding:0;margin:10px 0;columns:2;column-gap:12px}
@media (max-width:700px){ .enrclass-list{columns:1} }
.enrclass-list li{break-inside:avoid;margin:6px 0}
.enrclass-list a{
  display:flex;flex-direction:column;gap:4px;border:1px solid var(--edge);
  border-radius:10px;padding:8px 10px;color:var(--ink);background:var(--card)
}
.enrclass-list a:hover{background:var(--hover);border-color:#b9d6f9}

/* Catalog container */
#catalog{margin-top:18px}
</style>
</head>

<body>
<div class="wrap">

  <h1>910CPR Courses & Schedule</h1>
  <div id="status"></div>

  <!-- Popular -->
  <section id="popular" itemscope itemtype="https://schema.org/ItemList" style="max-width:1120px;margin:12px auto 22px;">
    <meta itemprop="name" content="Most Popular CPR & Healthcare Provider Classes in Wilmington and Burgaw, NC">
    <div style="display:grid;grid-template-columns:1.25fr .75fr;gap:18px;align-items:center;">
      <div>
        <h2 style="margin:0 0 10px;font-size:20px;line-height:1.2;">Most popular classes</h2>
        <table role="presentation" style="width:100%;border-collapse:separate;border-spacing:12px 12px;">
          <tr>
            <td style="width:25%;"><a class="popbtn popular-link" data-hint="AHA – BLS Provider - In-person Initial" href="https://coastalcprtraining.enrollware.com/schedule" style="display:block;color:#fff;border-radius:12px;padding:12px 14px;background:linear-gradient(180deg,#3e8bf0,#0b66c3);box-shadow:0 8px 22px rgba(0,0,0,.18);"><span class="title" style="display:block;font-weight:800;font-size:14px;margin-bottom:6px;">BLS</span><em class="sub" style="display:block;font-size:12.5px;opacity:.95;">Initial or renewal; instructor-led</em></a></td>
            <td style="width:25%;"><a class="popbtn popular-link" data-hint="AHA – BLS Provider - Online Class" href="https://coastalcprtraining.enrollware.com/schedule" style="display:block;color:#fff;border-radius:12px;padding:12px 14px;background:linear-gradient(180deg,#4a9af5,#2a7be6);box-shadow:0 8px 22px rgba(0,0,0,.18);"><span class="title" style="display:block;font-weight:800;font-size:14px;margin-bottom:6px;">BLS Online</span><em class="sub" style="display:block;font-size:12.5px;opacity:.95;">Blended: online + in-person skills</em></a></td>
            <td style="width:25%;"><a class="popbtn popular-link" data-hint="AHA – ACLS Provider - In-person Renewal" href="https://coastalcprtraining.enrollware.com/schedule" style="display:block;color:#fff;border-radius:12px;padding:12px 14px;background:linear-gradient(180deg,#ff6b76,#b31d2c);box-shadow:0 8px 22px rgba(0,0,0,.18);"><span class="title" style="display:block;font-weight:800;font-size:14px;margin-bottom:6px;">ACLS</span><em class="sub" style="display:block;font-size:12.5px;opacity:.95;">Fully in-person renewal</em></a></td>
            <td style="width:25%;"><a class="popbtn popular-link" data-hint="AHA – ACLS Provider (HeartCode + Skills)" href="https://coastalcprtraining.enrollware.com/schedule" style="display:block;color:#fff;border-radius:12px;padding:12px 14px;background:linear-gradient(180deg,#ff8a93,#e14c59);box-shadow:0 8px 22px rgba(0,0,0,.18);"><span class="title" style="display:block;font-weight:800;font-size:14px;margin-bottom:6px;">ACLS Online</span><em class="sub" style="display:block;font-size:12.5px;opacity:.95;">Initial (online + skills)</em></a></td>
          </tr>
          <tr>
            <td style="width:25%;"><a class="popbtn popular-link" data-hint="AHA – PALS Provider - In-person Renewal" href="https://coastalcprtraining.enrollware.com/schedule" style="display:block;color:#fff;border-radius:12px;padding:12px 14px;background:linear-gradient(180deg,#9c8cff,#5b4abf);box-shadow:0 8px 22px rgba(0,0,0,.18);"><span class="title" style="display:block;font-weight:800;font-size:14px;margin-bottom:6px;">PALS</span><em class="sub" style="display:block;font-size:12.5px;opacity:.95;">Fully in-person renewal</em></a></td>
            <td style="width:25%;"><a class="popbtn popular-link" data-hint="AHA – PALS Provider (HeartCode + Skills)" href="https://coastalcprtraining.enrollware.com/schedule" style="display:block;color:#fff;border-radius:12px;padding:12px 14px;background:linear-gradient(180deg,#b6aaff,#7a66ff);box-shadow:0 8px 22px rgba(0,0,0,.18);"><span class="title" style="display:block;font-weight:800;font-size:14px;margin-bottom:6px;">PALS Online</span><em class="sub" style="display:block;font-size:12.5px;opacity:.95;">Initial (online + skills)</em></a></td>
            <td style="width:25%;"><a class="popbtn popular-link" data-hint="HSI First Aid/CPR/AED (In-Person)" href="https://coastalcprtraining.enrollware.com/schedule" style="display:block;color:#fff;border-radius:12px;padding:12px 14px;background:linear-gradient(180deg,#7a8a98,#485563);box-shadow:0 8px 22px rgba(0,0,0,.18);"><span class="title" style="display:block;font-weight:800;font-size:14px;margin-bottom:6px;">First Aid / CPR / AED</span><em class="sub" style="display:block;font-size:12.5px;opacity:.95;">Fully in-person course</em></a></td>
            <td style="width:25%;"><a class="popbtn popular-link" data-hint="AHA – Heartsaver Online" href="https://coastalcprtraining.enrollware.com/schedule" style="display:block;color:#fff;border-radius:12px;padding:12px 14px;background:linear-gradient(180deg,#96a6b4,#7b8896);box-shadow:0 8px 22px rgba(0,0,0,.18);"><span class="title" style="display:block;font-weight:800;font-size:14px;margin-bottom:6px;">First Aid / CPR / AED Online</span><em class="sub" style="display:block;font-size:12.5px;opacity:.95;">Flexible + fast (online + skills)</em></a></td>
          </tr>
        </table>
      </div>

      <!-- Right: Brand banner -->
      <div style="text-align:center;">
        <img
          src="https://www.enrollware.com/sitefiles/coastalcprtraining/910CPR_wave.jpg"
          alt="910CPR wave brand banner"
          loading="lazy"
          style="max-width:100%;height:auto;border-radius:12px;border:1px solid rgba(0,0,0,.08);box-shadow:0 8px 22px rgba(0,0,0,.12)"
        >
      </div>
    </div>
  </section>

  <!-- Catalog rendered from Enrollware snapshot -->
  <div id="catalog"></div>

</div><!-- /.wrap -->

<script>
(function(){
  const ENR_ORIGIN='https://coastalcprtraining.enrollware.com';
  const statusEl=document.getElementById('status');

  function setStatus(msg,isErr){
    statusEl.textContent=msg||'';
    statusEl.className=isErr?'err':'';
    statusEl.style.display = msg ? 'block' : 'none';
  }

  const isCt=id=>typeof id==='string' && /^ct\d{3,}$/i.test(id);
  const ctHref=id=>`${ENR_ORIGIN}/schedule#${encodeURIComponent(id)}`;

  function absolutizeUrls(frag){
    frag.querySelectorAll('img,a').forEach(el=>{
      const attr=el.tagName==='IMG'?'src':'href';
      const v=el.getAttribute(attr); if(!v) return;
      if(/^https?:\/\//i.test(v)) return;
      const abs=v.startsWith('/')?ENR_ORIGIN+v:ENR_ORIGIN+'/'+v.replace(/^\.\//,'');
      el.setAttribute(attr,abs);
    });
    return frag;
  }

  function getCtId(panel,root){
    try{
      const anchor=panel.querySelector('[id^="ct"],[name^="ct"]');
      if(anchor){
        const v=anchor.id||anchor.getAttribute('name');
        if(isCt(v)) return v;
      }
      const link=panel.querySelector('a[href*="#ct"]');
      if(link){
        const href=link.getAttribute('href')||'';
        const m=href.match(/#(ct\d+)/i);
        if(m) return m[1];
      }
      let prev=panel.previousElementSibling;
      for(let i=0;i<8 && prev;i++){
        if(prev.matches && prev.matches('[id^="ct"],[name^="ct"]')){
          const v=prev.id||prev.getAttribute('name');
          if(isCt(v)) return v;
        }
        const inner=prev.querySelector ? prev.querySelector('[id^="ct"],[name^="ct"]') : null;
        if(inner){
          const v=inner.id||inner.getAttribute('name');
          if(isCt(v)) return v;
        }
        prev=prev.previousElementSibling;
      }
      if(window.NodeFilter){
        const walker=document.createTreeWalker(root,NodeFilter.SHOW_ELEMENT);
        let last=''; while(walker.nextNode()){
          const el=walker.currentNode; if(el===panel) break;
          const id=el.id||el.getAttribute?.('name'); if(id && isCt(id)) last=id;
        }
        return last;
      }
    }catch(e){}
    return '';
  }

  function parseDateFromText(t){
    if(!t) return null; const s=t.trim();
    const m=s.match(/([A-Za-z]+)\s+(\d{1,2}),\s*(\d{4})\s+at\s+(\d{1,2}):(\d{2})\s*(AM|PM)/i);
    if(!m) return null;
    const months={january:0,february:1,march:2,april:3,may:4,june:5,july:6,august:7,september:8,october:9,november:10,december:11};
    let h=+m[4]; if(m[6].toUpperCase()==='PM'&&h<12)h+=12; if(m[6].toUpperCase()==='AM'&&h===12)h=0;
    return new Date(+m[3],months[m[1].toLowerCase()],+m[2],h,+m[5]);
  }

  function limitUlToWindow(ul,maxDays=28,maxItems=10){
    if(!ul) return {ul,kept:0,total:0};
    const cutoff=new Date(); cutoff.setDate(cutoff.getDate()+maxDays);
    const lis=[...ul.querySelectorAll(':scope>li')]; let kept=0,total=0;
    for(const li of lis){ total++;
      const a=li.querySelector('a'); const txt=(a?.textContent||li.textContent||'').trim();
      const dt=parseDateFromText(txt);
      if(!dt || (dt<=cutoff && kept<maxItems)){ kept++; } else { li.remove(); }
    }
    return {ul,kept,total};
  }

  async function loadSnapshotHTML(){
    const here=location.pathname,base=here.replace(/[^/]+$/,'');
    const tries=[
      base+'data/enrollware-schedule.html',
      '/ew2landers/data/enrollware-schedule.html',
      './data/enrollware-schedule.html',
      'data/enrollware-schedule.html'
    ];
    for(const u of tries){
      try{ const r=await fetch(u,{cache:'no-cache'}); if(r.ok) return {html:await r.text(),url:u}; }catch{}
    }
    return {html:null,url:null};
  }

  function buildCourseCard(c){
    const course=document.createElement('details'); course.className='course';
    course.innerHTML=
      '<summary class="course-head"><span class="hlink" aria-hidden="true">'
      + (c.titleHTML||'').trim()
      + '</span></summary>'
      + '<div class="body">'
      +   '<div class="desc">'+(c.descHTML||'')+'</div>'
      +   '<ul class="enrclass-list"></ul>'
      +   '<div class="meta">'
      +     (c.total>c.kept ? ('Showing '+c.kept+' of '+c.total+' upcoming (~4 weeks). ') : 'All upcoming sessions shown. ')
      +     '<a class="btn" href="'+(isCt(c.id)?ctHref(c.id):(ENR_ORIGIN+'/schedule'))+'">See all dates</a>'
      +   '</div>'
      + '</div>';
    const ulNode=c.ul; if(ulNode){ course.querySelector('.enrclass-list').replaceWith(ulNode); }
    return course;
  }

  async function renderCatalog(){
    const host=document.getElementById('catalog');
    const load=await loadSnapshotHTML();
    if(!load.html){ setStatus('Could not load schedule snapshot. Put it at docs/data/enrollware-schedule.html', true); return; }

    try{
      const root=document.createElement('div'); root.innerHTML=load.html;
      const panels=[...root.querySelectorAll('.enrpanel')];
      const sections=[]; let current=null;

      panels.forEach(p=>{
        const headingEl=p.querySelector('.enrpanel-heading,h1,h2,h3,h4'); if(!headingEl) return;
        const headingFrag=headingEl.cloneNode(true); absolutizeUrls(headingFrag);
        const titleHTML=headingFrag.innerHTML.trim();

        const bodyEl=p.querySelector('.enrpanel-body');
        const descClone=bodyEl?bodyEl.cloneNode(true):null;
        if(descClone){ const u=descClone.querySelector('ul.enrclass-list'); if(u) u.remove(); absolutizeUrls(descClone); }
        const descHTML=descClone?(descClone.innerHTML||'').trim():'';

        const ul=p.querySelector('ul.enrclass-list');
        const hasDates=!!ul;

        if(!hasDates){
          current={header:{titleHTML,descHTML},courses:[]}; sections.push(current);
          return;
        }

        if(!current){ current={header:{titleHTML:'Courses',descHTML:''},courses:[]}; sections.push(current); }

        const ulClone=ul.cloneNode(true); absolutizeUrls(ulClone);
        const trimmed=limitUlToWindow(ulClone,28,10);
        const ctId=getCtId(p,root);

        current.courses.push({ id:ctId, titleHTML, descHTML, ul:trimmed.ul, kept:trimmed.kept, total:trimmed.total });
      });

      host.innerHTML='';
      sections.forEach((sec,idx)=>{
        const secEl=document.createElement('details'); secEl.className='section';
        if(idx===0) secEl.setAttribute('open','');
        secEl.innerHTML=
          '<summary><div class="ph-head"><div class="ph-title">'
          + sec.header.titleHTML
          + '</div>'
          + (sec.header.descHTML?('<div class="ph-sub">'+sec.header.descHTML+'</div>'):'')
          + '</div></summary>'
          + '<div class="section-body"><div class="courses-grid"></div></div>';
        const grid=secEl.querySelector('.courses-grid');

        if(sec.courses.length){
          // NEW: For EVERY course, add a blank spacer AFTER it, and force a new row
          for(let i=0;i<sec.courses.length;i++){
            grid.appendChild(buildCourseCard(sec.courses[i]));
            grid.insertAdjacentHTML('beforeend','<div class="course spacer" aria-hidden="true"></div>');
            // optional hard break to guarantee next pair starts a fresh row even if CSS changes
            grid.insertAdjacentHTML('beforeend','<div class="rowbreak" aria-hidden="true"></div>');
          }
        }else{
          // No courses—still keep layout predictable
          grid.insertAdjacentHTML('beforeend','<div class="course spacer" aria-hidden="true"></div>');
          grid.insertAdjacentHTML('beforeend','<div class="rowbreak" aria-hidden="true"></div>');
        }

        host.appendChild(secEl);
      });

      setStatus(''); // clear
    }catch(err){
      setStatus('Render error: '+(err?.message||String(err)), true);
    }
  }

  function resolvePopularToCt(){
    try{
      const idx=[];
      document.querySelectorAll('#catalog details.course .course-head .hlink').forEach(h=>{
        const title=(h.textContent||'').trim();
        const card=h.closest('details.course'); if(!card) return;
        const a=card.querySelector('.meta a.btn'); if(!a) return;
        const href=a.getAttribute('href')||'';
        const m=href.match(/#(ct\d+)/i);
        const ct=m?m[1]:null;
        if(title && ct) idx.push({title,ct});
      });
      document.querySelectorAll('#popular .popular-link').forEach(a=>{
        const hint=(a.getAttribute('data-hint')||'').toLowerCase();
        const found=idx.find(x=>x.title.toLowerCase().includes(hint));
        if(found){ a.setAttribute('href', ENR_ORIGIN+'/schedule#'+encodeURIComponent(found.ct)); a.setAttribute('title', found.title+' – full schedule'); }
      });
    }catch(e){ /* no-op */ }
  }

  document.addEventListener('DOMContentLoaded', async ()=>{
    await renderCatalog();
    resolvePopularToCt();
  });
})();
</script>

<!-- Voice widget -->
<embeddable-voice id="1cf9bf8f-38da-437e-abfb-efa1ce9a02ff"></embeddable-voice>
<script src="https://cdn.247aireceptionist.com/script.js"></script>
</body>
</html>
